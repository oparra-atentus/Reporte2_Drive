function buildCsv(t,e,i,o,s,r){var n=JSON.stringify(t);$("<form>").attr({type:"hidden",id:"form",name:"form",action:"../utils/descarga_csv_elementos_plus.php",method:"POST",target:"_self"}).appendTo("body"),$("#form").hide(),$("<input>").attr({type:"text",id:"data",name:"data",value:unescape(encodeURIComponent(n))}).appendTo("#form"),$("<input>").attr({type:"text",id:"objetivoId",name:"objetivoId",value:e}).appendTo("#form"),$("<input>").attr({type:"text",id:"serviceId",name:"serviceId",value:o}).appendTo("#form"),$("<input>").attr({type:"text",id:"objetivoName",name:"objetivoName",value:i}).appendTo("#form"),$("<input>").attr({type:"text",id:"date",name:"date",value:s}).appendTo("#form"),$("<input>").attr({type:"text",id:"time",name:"time",value:r}).appendTo("#form"),$("#form").submit(),$("#form").remove()}function modal(){this.mostrarModal=function(){var t="",e=0,i="https://reporte2.atentus.com/simbologia.php",o=["Url ","Estado: ","Bytes: ","Segundos: ","Ip: ","Latencia","Dns","Descarga"],s=["Hace referencia la URL del elemento actual.","Indica el código del elemento HTTP que devolvió el servidor WEB o el error de red que detecto el atentubot, más información de códigos en: "+i.replace(i,"<a   href='"+i+"' target='_blank'>"+i+"</a>")+".","Columna que indica el tamaño de los elementos.","Columna que indica el tiempo total que tardo un elemento en descargar.","Muestra la dirección IP del elemento actual.","Tiempo que transcurrio entre la petición del elemento hasta que empezo la descarga del primer byte.","Tiempo que demora el servidor DNS en resolver.","Tiempo que transcurrio entre la descarga del primer byte y el termino de la descarga completa."];for(e=0;e<8;e++)t=t+'<table class="definicion" width="100%" ><tr><th>'+o[e]+"</th></tr><tr><td>"+s[e]+"</td></tr></table></br>";dojo.byId("contenido").innerHTML=t,dijit.byId("ModalAyuda").show()},this.cerrarAyuda=function(){void 0!==dijit.byId("ModalAyuda")&&dijit.byId("ModalAyuda").destroyRecursive()},this.cerrarElemento=function(){void 0!==dijit.byId("ModalMuestra")&&dijit.byId("ModalMuestra").destroyRecursive()}}function ShowModal(t,e,i,o,s,r,n,a,d,l,c){var h="",m=0,u=1,b=timeTotalDownload(s,r);if(null!=i&&0!=i.length&&""!=i||(i="NO CAPTURADO"),null!=s&&0!=s.length&&""!=s||(s="0"),null!==r&&0!=r.length&&""!=r||(r="0"),null!=n&&0!=n.length&&""!=n||(n="0"),s=1e3*s+" ms",r=1e3*r+" ms",n+=" Bytes",d+=" ms",null!=o&&0!=o.length&&""!=o||(o="NO CAPTURADO"),null!=d&&0!=d.length&&""!=d||(d="0.000 ms"),e.length>69)for(var p=0;p<e.length;p++)p===70*u&&(e=e.substring(0,p)+"\n"+e.substring(p,e.length),u++);if(c.length>34)var g=c.substring(0,35)+" ...";else g=c;var f=e.replace(e,"<a   href='"+e+"' target='_blank'>"+e+"</a>");a=a+"  ("+l+")";var A=["Url: ","Tipo: ","Ip: ","Latencia: ","Descarga: ","Tiempo total Descarga","Tamaño: ","Estado","Dns"],y=[f=(f=f.replace('"',"")).replace("localhost",""),i,o,s,r,b,n,a,d];if(navigator.userAgent.indexOf("MSIE")>0){for(m=0;m<8;m++)h=h+'<table class="definicion" width="100%" ><tr><th>'+A[m]+"</th></tr><tr><td>"+y[m]+"</td></tr></table></br>";dojo.byId("usoIE").innerHTML=h}else{for(m=0;m<8;m++)h=h+"<tr><th>"+A[m]+"</th></tr><tr><td>"+y[m]+"</td></tr>";dojo.byId("contenido2").innerHTML=h}dojo.attr("ModalMuestra_title",{innerHTML:"Elemento "+t+": "+g,title:"Elemento: "+t+" "+c}),dojo.attr("ModalMuestra",{style:"widht: 500px;height: 365px; overflow-y: hidden;overflow-x: hidden;padding:2px"}),dijit.byId("ModalMuestra").show()}function timeTotalDownload(t,e){var i=(parseInt(t.replace(".",""))+parseInt(e.replace(".",""))).toString(),o=i.length;return 4==o?i=i.substr(0,1)+"."+i.substr(1):5==o?i=i.substr(0,2)+"."+i.substr(2):6==o&&(i=i.substr(0,3)+"."+i.substr(3)),i+" ms"}function elementosPlus(t){var e=this;this.divisiones=10,this.anchoTotal=715,this.anchoDibujable,this.anchoCeldasDerechas=50,this.anchoNombres=105,this.altoElementos=0,this.totalTiempo=0,this.totalBody=0,this.totalHeader=0,this.datos="",this.tiempoTotal="",this.nombreGrafico=t,this.alto="";var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("width",this.anchoTotal),i.setAttribute("id","svgelem_"+this.nombreGrafico),i.setAttribute("xmlns","http://www.w3.org/2000/svg"),document.getElementById("contenedor_"+this.nombreGrafico).appendChild(i);var o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("x",0),o.setAttribute("y",0),o.setAttribute("height","100%"),o.setAttribute("width","100%"),o.setAttribute("id","fondo"),o.setAttribute("class","rect_cont"),o.setAttribute("style","fill:#ffffff"),i.appendChild(o),this.variables={0:"elementos",1:"ip",2:"espera",3:"latencia",4:"descarga",5:"DNS",6:"tamanoBody",7:"tamanoHeader",8:"contentType",9:"status",10:"es_ok",11:"nombre_estado"},this.textTooltipb="font-family: Monospace; font-size: 9px; color: #323232; font-weight:bold; text-transform: uppercase;",this.textTooltip="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 9px; color: #323232;",this.textTooltip2="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 9px; color: #323232;cursor: pointer;text-decoration: underline;",this.download=function(){$.ajax({async:!0,data:{data:data},url:"../utils/descarga_csv_elementos_plus.php",type:"POST"})},this.asociar=function(){$("#contenedor_"+this.nombreGrafico).find(".tiene_tooltip ").live("mousemove",function(t){posX=t.pageX-$("#contenedor_"+e.nombreGrafico).offset().left,posY=t.pageY-$("#contenedor_"+e.nombreGrafico).offset().top,indice=this.getAttribute("data-indice"),url=this.getAttribute("data-url"),e.cuadroTooltip(indice,posX,posY,url)}),$("#contenedor_"+this.nombreGrafico).find(".tiene_tooltip2 ").live("mousemove",function(t){posX2=t.pageX-$("#contenedor_"+e.nombreGrafico).offset().left,posY2=t.pageY-$("#contenedor_"+e.nombreGrafico).offset().top,indice2=this.getAttribute("data-indice"),url2=this.getAttribute("data-url"),e.cuadroTooltip2(indice2,posX2,posY2,url2)}),$("#contenedor_"+this.nombreGrafico).live("mouseout",function(t){e.borraCuadroTexto()})},this.creaGraficos=function(){if(this.datos[0].length>0){this.alto<60?document.getElementById("svgelem_"+this.nombreGrafico).setAttribute("height",210):document.getElementById("svgelem_"+this.nombreGrafico).setAttribute("height",this.alto+140),this.creaEscalas();var t=0;for(this.tiempoTotal=this.transformaSegundos(this.tiempoTotal),this.anchoDibujable=.95*(this.anchoTotal-2*this.anchoCeldasDerechas-this.anchoNombres)-8,this.creaEjeX();this.datos[t];)this.creaEjeY(t),this.creaBarra(t),this.creaCeldasDerechas(t),isNaN(parseFloat(this.datos[t][6]))||(this.totalBody=this.totalBody+parseFloat(this.datos[t][6])),-1==this.datos[t][7]||isNaN(this.datos[t][7])||(this.totalHeader=this.totalBody+parseFloat(this.datos[t][7])),t++;this.creaTotales()}else{document.getElementById("logo_advertencia_"+this.nombreGrafico).style.display="inline";var e=document.createElementNS("http://www.w3.org/2000/svg","text"),i=document.createTextNode("No se encontraron datos para este monitoreo.");e.setAttribute("x",260),e.setAttribute("y",36),e.setAttribute("style","font-family: Verdana, Arial, Helvetica, sans-serif;font-size: 12px;color: #525252;text-decoration: none;font-weight: normal;padding: 1px;"),e.appendChild(i),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(e)}},this.creaEscalas=function(){if(document.getElementById("eje_1_"+this.nombreGrafico))t=document.getElementById("eje_1_"+this.nombreGrafico);else var t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1",5),t.setAttribute("x2",this.anchoTotal),t.setAttribute("y1",40),t.setAttribute("y2",40),t.setAttribute("id","eje_1_"+this.nombreGrafico),t.setAttribute("style","stroke:black;stroke-width:0.7;fill:#000000");var e=document.createElementNS("http://www.w3.org/2000/svg","line");e.setAttribute("x1",this.anchoTotal-2*this.anchoCeldasDerechas),e.setAttribute("x2",this.anchoTotal-2*this.anchoCeldasDerechas),e.setAttribute("y1",40),e.setAttribute("y2",this.alto+140),e.setAttribute("id","eje_2_"+this.nombreGrafico),e.setAttribute("style","stroke:black;stroke-width:0.7;fill:#000000");var i=document.createElementNS("http://www.w3.org/2000/svg","line");i.setAttribute("x1",this.anchoTotal-this.anchoCeldasDerechas),i.setAttribute("x2",this.anchoTotal-this.anchoCeldasDerechas),i.setAttribute("y1",40),i.setAttribute("y2",this.alto+20),i.setAttribute("id","eje_3_"+this.nombreGrafico),i.setAttribute("style","stroke:black;stroke-width:0.7;fill:#000000");var o=document.createElementNS("http://www.w3.org/2000/svg","line");o.setAttribute("x1",this.anchoTotal),o.setAttribute("x2",this.anchoTotal),o.setAttribute("y1",40),o.setAttribute("y2",this.alto+140),o.setAttribute("id","eje_4_"+this.nombreGrafico),o.setAttribute("style","stroke:black;stroke-width:0.7;fill:#000000");var s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("x",0),s.setAttribute("width",this.anchoTotal),s.setAttribute("y",20*(this.datos.length+2)-2),s.setAttribute("height",120),s.setAttribute("fill","#f4f7f9"),s.setAttribute("opacity","1"),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(s);var r=document.createElementNS("http://www.w3.org/2000/svg","text"),n=document.createTextNode("Segundos");r.setAttribute("x",this.anchoTotal/2+15),r.setAttribute("y",15),r.setAttribute("style",this.textTooltipb+"text-anchor: end"),r.appendChild(n),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(r);var a=document.createElementNS("http://www.w3.org/2000/svg","line");a.setAttribute("x1",this.anchoNombres+10),a.setAttribute("x2",this.anchoTotal/2-55),a.setAttribute("y1",13),a.setAttribute("y2",13),a.setAttribute("id","eje_5_"+this.nombreGrafico),a.setAttribute("style","stroke:black;stroke-width:0.7;fill:#000000");var d=document.createElementNS("http://www.w3.org/2000/svg","line");d.setAttribute("x1",this.anchoTotal/2+55),d.setAttribute("x2",this.anchoTotal-102),d.setAttribute("y1",13),d.setAttribute("y2",13),d.setAttribute("id","eje_6_"+this.nombreGrafico),d.setAttribute("style","stroke:black;stroke-width:0.7;fill:#000000"),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(t),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(e),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(i),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(o),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(a),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(d)},this.creaTotales=function(){if(document.getElementById("fin_1_"+this.nombreGrafico))t=document.getElementById("fin_1_"+this.nombreGrafico);else var t=document.createElementNS("http://www.w3.org/2000/svg","line");if(t.setAttribute("x1",0),t.setAttribute("x2",this.anchoTotal),t.setAttribute("y1",this.altoElementos),t.setAttribute("y2",this.altoElementos),t.setAttribute("id","fin_1_"+this.nombreGrafico),t.setAttribute("style","stroke:black;stroke-width:0.7;fill:#000000"),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(t),document.getElementById("fin_2_"+this.nombreGrafico))t=document.getElementById("fin_2_"+this.nombreGrafico);else var t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1",0),t.setAttribute("x2",this.anchoTotal),t.setAttribute("y1",this.altoElementos+20),t.setAttribute("y2",this.altoElementos+20),t.setAttribute("id","fin_2_"+this.nombreGrafico),t.setAttribute("style","stroke:black;stroke-width:0.7;fill:#000000"),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(t);var e=document.createElementNS("http://www.w3.org/2000/svg","text"),i=document.createTextNode("Tiempo Descarga (Segs)");e.setAttribute("x",10),e.setAttribute("y",this.altoElementos+16),e.setAttribute("style",this.textTooltipb),e.appendChild(i),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(e);var o=document.createElementNS("http://www.w3.org/2000/svg","text"),s=document.createTextNode(this.tiempoTotal.toFixed(3));if(o.setAttribute("x",this.anchoTotal-5),o.setAttribute("y",this.altoElementos+16),o.setAttribute("style",this.textTooltipb+"text-anchor: end"),o.appendChild(s),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(o),document.getElementById("fin_3_"+this.nombreGrafico))t=document.getElementById("fin_3_"+this.nombreGrafico);else t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1",0),t.setAttribute("x2",this.anchoTotal),t.setAttribute("y1",this.altoElementos+40),t.setAttribute("y2",this.altoElementos+40),t.setAttribute("id","fin_1_"+this.nombreGrafico),t.setAttribute("style","stroke:black;stroke-width:0.7;fill:#000000"),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(t);var r=document.createElementNS("http://www.w3.org/2000/svg","text"),n=document.createTextNode("Sumatoria Tiempos (Segs)");r.setAttribute("x",10),r.setAttribute("y",this.altoElementos+36),r.setAttribute("style",this.textTooltipb),r.appendChild(n),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(r);var a=document.createElementNS("http://www.w3.org/2000/svg","text"),d=document.createTextNode(this.totalTiempo.toFixed(3));if(a.setAttribute("x",this.anchoTotal-5),a.setAttribute("y",this.altoElementos+36),a.setAttribute("style",this.textTooltipb+"text-anchor: end"),a.appendChild(d),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(a),document.getElementById("fin_4_"+this.nombreGrafico))t=document.getElementById("fin_4_"+this.nombreGrafico);else t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1",0),t.setAttribute("x2",this.anchoTotal),t.setAttribute("y1",this.altoElementos+60),t.setAttribute("y2",this.altoElementos+60),t.setAttribute("id","fin_4_"+this.nombreGrafico),t.setAttribute("style","stroke:black;stroke-width:0.7;fill:#000000"),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(t);a=document.createElementNS("http://www.w3.org/2000/svg","text"),d=document.createTextNode("Tamaño Total (KB)");a.setAttribute("x",10),a.setAttribute("y",this.altoElementos+56),a.setAttribute("style",this.textTooltipb),a.appendChild(d),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(a);var l=document.createElementNS("http://www.w3.org/2000/svg","text"),c=(this.totalBody+this.totalHeader)/1024,h=document.createTextNode(c.toFixed(3));if(l.setAttribute("x",this.anchoTotal-5),l.setAttribute("y",this.altoElementos+56),l.setAttribute("style",this.textTooltipb+"text-anchor: end"),l.appendChild(h),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(l),document.getElementById("fin_5_"+this.nombreGrafico))t=document.getElementById("fin_5_"+this.nombreGrafico);else t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1",0),t.setAttribute("x2",this.anchoTotal),t.setAttribute("y1",this.altoElementos+80),t.setAttribute("y2",this.altoElementos+80),t.setAttribute("id","fin_5_"+this.nombreGrafico),t.setAttribute("style","stroke:black;stroke-width:0.7;fill:#000000"),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(t);l=document.createElementNS("http://www.w3.org/2000/svg","text"),h=document.createTextNode("Total Elementos Descargados");l.setAttribute("x",10),l.setAttribute("y",this.altoElementos+76),l.setAttribute("style",this.textTooltipb),l.appendChild(h),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(l);var m=document.createElementNS("http://www.w3.org/2000/svg","text"),u=document.createTextNode(this.datos.length);m.setAttribute("x",this.anchoTotal-5),m.setAttribute("y",this.altoElementos+76),m.setAttribute("style",this.textTooltipb+"text-anchor: end"),m.appendChild(u),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(m);for(var b=0,p=0,g=0;this.datos.length>b;b++)"true"==this.datos[b][10]?p+=1:g+=1;if(document.getElementById("fin_6_"+this.nombreGrafico))t=document.getElementById("fin_6_"+this.nombreGrafico);else t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1",0),t.setAttribute("x2",this.anchoTotal),t.setAttribute("y1",this.altoElementos+100),t.setAttribute("y2",this.altoElementos+100),t.setAttribute("id","fin_6_"+this.nombreGrafico),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(t);m=document.createElementNS("http://www.w3.org/2000/svg","text"),u=document.createTextNode("Total Elementos Descargados OK");m.setAttribute("x",10),m.setAttribute("y",this.altoElementos+96),m.setAttribute("style",this.textTooltipb),m.appendChild(u),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(m);var f=document.createElementNS("http://www.w3.org/2000/svg","text"),A=document.createTextNode(p);if(f.setAttribute("x",this.anchoTotal-5),f.setAttribute("y",this.altoElementos+96),f.setAttribute("style",this.textTooltipb+"text-anchor: end"),f.appendChild(A),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(f),document.getElementById("fin_7_"+this.nombreGrafico))t=document.getElementById("fin_7_"+this.nombreGrafico);else t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1",0),t.setAttribute("x2",this.anchoTotal),t.setAttribute("y1",this.altoElementos+100),t.setAttribute("y2",this.altoElementos+100),t.setAttribute("id","fin_7_"+this.nombreGrafico),t.setAttribute("style","stroke:black;stroke-width:0.7;fill:#000000"),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(t);f=document.createElementNS("http://www.w3.org/2000/svg","text"),A=document.createTextNode("Total Elementos Descargados con Error");f.setAttribute("x",10),f.setAttribute("y",this.altoElementos+116),f.setAttribute("style",this.textTooltipb),f.appendChild(A),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(f);var y=document.createElementNS("http://www.w3.org/2000/svg","text"),x=document.createTextNode(g);if(y.setAttribute("x",this.anchoTotal-5),y.setAttribute("y",this.altoElementos+116),y.setAttribute("style",this.textTooltipb+"text-anchor: end"),y.appendChild(x),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(y),document.getElementById("fin_8_"+this.nombreGrafico))t=document.getElementById("fin_8_"+this.nombreGrafico);else t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1",0),t.setAttribute("x2",this.anchoTotal),t.setAttribute("y1",this.altoElementos+120),t.setAttribute("y2",this.altoElementos+120),t.setAttribute("id","fin_8_"+this.nombreGrafico),t.setAttribute("style","stroke:black;stroke-width:0.7;fill:#000000"),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(t)},this.creaEjeX=function(){valor=this.tiempoTotal/this.divisiones;var t=0;for(t=0;t<=this.divisiones;t++){var e=document.createElementNS("http://www.w3.org/2000/svg","text"),i=document.createTextNode(parseFloat(valor*t).toFixed(2));e.setAttribute("x",this.anchoNombres+t*(this.anchoDibujable/this.divisiones)+8),e.setAttribute("y",35),e.setAttribute("style",this.textTooltip),e.appendChild(i),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(e);var o=document.createElementNS("http://www.w3.org/2000/svg","line");o.setAttribute("x1",this.anchoNombres+t*(this.anchoDibujable/this.divisiones)+8),o.setAttribute("x2",this.anchoNombres+t*(this.anchoDibujable/this.divisiones)+8),o.setAttribute("y1",40),o.setAttribute("y2",this.alto+20),o.setAttribute("style","fill:rgb(168,162,162); stroke:rgb(0,0,0); opacity:0.15"),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(o)}var s=document.createElementNS("http://www.w3.org/2000/svg","text"),r=document.createTextNode("ELEMENTOS");s.setAttribute("x",5),s.setAttribute("y",35),s.setAttribute("style",this.textTooltipb),s.appendChild(r),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(s);var n=document.createElementNS("http://www.w3.org/2000/svg","text"),a=document.createTextNode("ESTADO");n.setAttribute("x",this.anchoNombres-30),n.setAttribute("y",35),n.setAttribute("style",this.textTooltipb),n.appendChild(a),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(n);var d=document.createElementNS("http://www.w3.org/2000/svg","text"),l=document.createTextNode("BYTES");d.setAttribute("x",this.anchoTotal-92),d.setAttribute("y",35),d.setAttribute("style",this.textTooltipb),d.appendChild(l),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(d);var c=document.createElementNS("http://www.w3.org/2000/svg","text"),h=document.createTextNode("SEGS");c.setAttribute("x",this.anchoTotal-43),c.setAttribute("y",35),c.setAttribute("style",this.textTooltipb),c.appendChild(h),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(c)},this.creaEjeY=function(t){if(y=50,(t+1)%2==0){var e=document.createElementNS("http://www.w3.org/2000/svg","rect");e.setAttribute("x",0),e.setAttribute("y",parseInt(y-20+20*t+8)),e.setAttribute("width",this.anchoTotal),e.setAttribute("height",20),e.setAttribute("id","plomo_"+t),e.setAttribute("style","fill:rgb(168,162,162); stroke:rgb(0,0,0); opacity:0.15"),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(e)}var i=this.datos[t][0].split("?")[0].split("/");if(""==i[i.length-1])var o=i[i.length-2];else o=i[i.length-1];if(0!=o.length)if(o.length>9)var s=document.createTextNode(t+"-"+o.substring(0,8)+"...");else s=document.createTextNode(t+"-"+o.substring(0,9));else s=document.createTextNode(t+"-NO CAPTURADO");var r=document.createElementNS("http://www.w3.org/2000/svg","text");r.setAttribute("x",5),r.setAttribute("y",parseInt(y+20*t)),r.setAttribute("style",this.textTooltip),r.appendChild(s);var n=this.datos[t][0],a=this.datos[t][1],d=this.transformaSegundos(this.datos[t][3]),l=this.transformaSegundos(this.datos[t][4]),c=this.datos[t][6],h=this.datos[t][9],m=this.transformaSegundos(this.datos[t][5]),u=this.datos[t][8],b=this.datos[t][11];if(r.setAttribute("data-indice",t),r.setAttribute("data-url","true"),r.setAttribute("onclick","ShowModal('"+t+"','"+n+"','"+u+"','"+a+"','"+d+"','"+l+"','"+c+"','"+h+"','"+m+"','"+b+"','"+o+"');"),r.setAttribute("style",this.textTooltip2),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(r),isNaN(this.datos[t][9]))var p=document.createTextNode("NO CAPTURADO");else p=document.createTextNode(this.datos[t][9]);var g=document.createElementNS("http://www.w3.org/2000/svg","text");"true"!=this.datos[t][10]&&201!=this.datos[t][9]&&g.setAttribute("fill","red"),g.setAttribute("x",this.anchoNombres-20),g.setAttribute("y",parseInt(y+20*t)),g.setAttribute("style",this.textTooltip),g.appendChild(p),g.setAttribute("class","tiene_tooltip2"),g.setAttribute("data-indice",t),g.setAttribute("data-url","true"),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(g),this.altoElementos=parseFloat(y+20*t+8)},this.creaBarra=function(t){if(-1!=this.datos[t][2].indexOf(":")){var e=parseFloat(this.anchoDibujable*parseFloat(this.transformaSegundos(this.datos[t][2]))/this.tiempoTotal);if(-1!=this.datos[t][3].indexOf(":"))var i=this.anchoDibujable*this.transformaSegundos(this.datos[t][3])/this.tiempoTotal;else i=1;if(-1!=this.datos[t][4].indexOf(":"))var o=this.anchoDibujable*this.transformaSegundos(this.datos[t][4])/this.tiempoTotal;else o=1;i<1&&(i=1),o<1&&(o=1);var s=parseFloat(this.anchoNombres)+parseFloat(e)+8,r=document.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("id","cuadro_rect_"+t+"_1"),r.setAttribute("rx","2"),r.setAttribute("ry","2"),r.setAttribute("x",s.toFixed(3)),r.setAttribute("y",20*t+40),r.setAttribute("width",i),r.setAttribute("height",16),"true"!=this.datos[t][10]?(r.setAttribute("style","cursor:pointer"),r.setAttribute("fill","#f7f7f7"),r.setAttribute("opacity","0.3")):(r.setAttribute("style","cursor:pointer"),r.setAttribute("fill",this.determinaColor(this.datos[t][8])),r.setAttribute("opacity","0.3")),r.setAttribute("data-indice",t),r.setAttribute("data-url","false"),r.setAttribute("class","tiene_tooltip"),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(r);var n=document.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("id","cuadro_rect_"+t+"_2"),n.setAttribute("rx","2"),n.setAttribute("ry","2"),n.setAttribute("x",this.anchoNombres+e+i+8),n.setAttribute("y",20*t+40),n.setAttribute("width",o),n.setAttribute("height",16),"true"!=this.datos[t][10]?(n.setAttribute("style","cursor:pointer"),n.setAttribute("fill","#f7f7f7")):(n.setAttribute("style","cursor:pointer"),n.setAttribute("fill",this.determinaColor(this.datos[t][8]))),n.setAttribute("data-indice",t),n.setAttribute("data-url","false"),n.setAttribute("class","tiene_tooltip"),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(n)}},this.creaCeldasDerechas=function(t){if(y=50,-1==this.datos[t][7]||isNaN(this.datos[t][7]))e=parseFloat(this.datos[t][6]);else var e=parseFloat(this.datos[t][6])+parseFloat(this.datos[t][7]);if(!isNaN(e)){var i=document.createElementNS("http://www.w3.org/2000/svg","text"),o=document.createTextNode(e);i.setAttribute("x",this.anchoTotal-this.anchoCeldasDerechas-5),i.setAttribute("y",parseInt(y+20*t)),i.setAttribute("style",this.textTooltip+"text-anchor:end"),i.appendChild(o),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(i)}if(-1!=this.datos[t][3].indexOf(":")&&-1!=this.datos[t][4].indexOf(":")){var s=this.transformaSegundos(this.datos[t][3])+this.transformaSegundos(this.datos[t][4]),r=document.createElementNS("http://www.w3.org/2000/svg","text"),n=document.createTextNode(s.toFixed(3));r.setAttribute("x",this.anchoTotal-5),r.setAttribute("y",parseInt(y+20*t)),r.setAttribute("style",this.textTooltip+"text-anchor:end"),r.appendChild(n),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(r),this.totalTiempo=parseFloat(this.totalTiempo)+parseFloat(s.toFixed(3))}},this.transformaSegundos=function(t){if(-1!=t.indexOf(":")){var e=t.split(":");t=parseFloat(3600*e[0])+parseFloat(60*e[1])+parseFloat(e[2])}else t=0;return t},this.cuadroTooltip=function(t,e,i,o){if(document.getElementById("cuadro_tooltip_"+this.nombreGrafico)){var s=document.getElementById("cuadro_tooltip_"+this.nombreGrafico),r=document.getElementById("elem_1_"+this.nombreGrafico);this.borrarChildNodes(r);var n=document.getElementById("elem_2_"+this.nombreGrafico);this.borrarChildNodes(n);var a=document.getElementById("ip_1_"+this.nombreGrafico);this.borrarChildNodes(a);var d=document.getElementById("ip_2_"+this.nombreGrafico);this.borrarChildNodes(d);var l=document.getElementById("latencia_1_"+this.nombreGrafico);this.borrarChildNodes(l);var c=document.getElementById("latencia_2_"+this.nombreGrafico);this.borrarChildNodes(c);var h=document.getElementById("descarga_1_"+this.nombreGrafico);this.borrarChildNodes(h);var m=document.getElementById("descarga_2_"+this.nombreGrafico);this.borrarChildNodes(m);var u=document.getElementById("tamano_b_1_"+this.nombreGrafico);this.borrarChildNodes(u);var b=document.getElementById("tamano_b_2_"+this.nombreGrafico);this.borrarChildNodes(b);var p=document.getElementById("estado_1_"+this.nombreGrafico);this.borrarChildNodes(p);var g=document.getElementById("estado_2_"+this.nombreGrafico);this.borrarChildNodes(g);var f=document.getElementById("dns_1_"+this.nombreGrafico);this.borrarChildNodes(f);var A=document.getElementById("dns_2_"+this.nombreGrafico);this.borrarChildNodes(A)}else{var y=document.createElementNS("http://www.w3.org/2000/svg","g");y.setAttribute("id","cuadro_"+this.nombreGrafico),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(y),(s=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("id","cuadro_tooltip_"+this.nombreGrafico),s.setAttribute("rx","6"),s.setAttribute("ry","12"),s.setAttribute("style","fill:#FFFFFF; stroke:#000000"),(r=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id","elem_1_"+this.nombreGrafico),r.setAttribute("style",this.textTooltipb),(n=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id","elem_2_"+this.nombreGrafico),n.setAttribute("style",this.textTooltip),(a=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id","ip_1_"+this.nombreGrafico),a.setAttribute("style",this.textTooltipb),(d=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id","ip_2_"+this.nombreGrafico),d.setAttribute("style",this.textTooltip),(l=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id","latencia_1_"+this.nombreGrafico),l.setAttribute("style",this.textTooltipb),(c=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id","latencia_2_"+this.nombreGrafico),c.setAttribute("style",this.textTooltip),(h=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id","descarga_1_"+this.nombreGrafico),h.setAttribute("style",this.textTooltipb),(m=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id","descarga_2_"+this.nombreGrafico),m.setAttribute("style",this.textTooltip),(f=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id","dns_1_"+this.nombreGrafico),f.setAttribute("style",this.textTooltipb),(A=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id","dns_2_"+this.nombreGrafico),A.setAttribute("style",this.textTooltip),(u=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id","tamano_b_1_"+this.nombreGrafico),u.setAttribute("style",this.textTooltipb),(b=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id","tamano_b_2_"+this.nombreGrafico),b.setAttribute("style",this.textTooltip),(p=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id","estado_1_"+this.nombreGrafico),p.setAttribute("style",this.textTooltipb),(g=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id","estado_2_"+this.nombreGrafico),g.setAttribute("style",this.textTooltip)}i+120>document.getElementById("contenedor_"+this.nombreGrafico).clientHeight&&(i=i-(i+120-document.getElementById("contenedor_"+this.nombreGrafico).clientHeight)-5);var x=document.createTextNode("ELEMENTO: "),w=document.createTextNode("IP: "),v=document.createTextNode("LATENCIA: "),_=document.createTextNode("DESCARGA: "),E=document.createTextNode("TAMAÑO: "),T=document.createTextNode("ESTADO: "),I=document.createTextNode("DNS: ");r.appendChild(x),a.appendChild(w),l.appendChild(v),h.appendChild(_),f.appendChild(I),u.appendChild(E),p.appendChild(T);var N=this.datos[t][0].split("?");if(0==o){var C=N[0].split("/");if(""==C[C.length-1])var G=this.datos[t][0].split("?")[0];else G=C[C.length-1];n.setAttribute("onclick",""),n.setAttribute("text-decoration","none")}else{G=N[0];"plomo"!=this.determinaColor(this.datos[t][8])?(n.setAttribute("onclick","window.open('"+this.datos[t][0]+"','Elementos Plus','width=700','height=300',top=200,left=300)"),n.setAttribute("text-decoration","underline")):(n.setAttribute("onclick",""),n.setAttribute("text-decoration","none"))}var B=document.createTextNode(G);if(-1==this.datos[t][1].indexOf("."))var S=document.createTextNode("NO CAPTURADO");else S=document.createTextNode(this.datos[t][1]);if(1==this.datos[t][3].indexOf(":"))var k=document.createTextNode("NO CAPTURADO");else k=document.createTextNode(this.transformaSegundos(this.datos[t][3])+" Segs");if(-1==this.datos[t][4].indexOf(":"))var O=document.createTextNode("NO CAPTURADO");else O=document.createTextNode(this.transformaSegundos(this.datos[t][4])+" Segs");if(parseFloat(this.datos[t][5])<0)var D=document.createTextNode("NO CAPTURADO");else D=document.createTextNode((parseFloat(this.datos[t][5])/1e3).toFixed(3)+" Segs");if(isNaN(this.datos[t][6]))var F=document.createTextNode("NO CAPTURADO");else F=document.createTextNode(this.datos[t][6]+" bytes");if(-1==this.datos[t][9]||"NULL"==this.datos[t][9])var j=document.createTextNode("NO CAPTURADO");else j=document.createTextNode(this.datos[t][9]);if("true"!=this.datos[t][10]&&201!=this.datos[t][9]?(n.setAttribute("fill","red"),d.setAttribute("fill","red"),c.setAttribute("fill","red"),m.setAttribute("fill","red"),b.setAttribute("fill","red"),g.setAttribute("fill","red"),A.setAttribute("fill","red")):(n.setAttribute("fill","black"),d.setAttribute("fill","black"),c.setAttribute("fill","black"),m.setAttribute("fill","black"),b.setAttribute("fill","black"),g.setAttribute("fill","black"),p.setAttribute("fill","black"),A.setAttribute("fill","black")),n.appendChild(B),d.appendChild(S),c.appendChild(k),m.appendChild(O),A.appendChild(D),b.appendChild(F),g.appendChild(j),e+(95+7*G.length)>document.getElementById("contenedor_"+this.nombreGrafico).clientWidth&&(e-=e+95+7*G.length-document.getElementById("contenedor_"+this.nombreGrafico).clientWidth-5),e<0&&(e=0),s.setAttribute("y",parseInt(i)),s.setAttribute("x",parseInt(e)),yTexto=i+10,r.setAttribute("x",parseInt(e+5)),r.setAttribute("y",parseInt(yTexto)),n.setAttribute("x",parseInt(e+5+95)),n.setAttribute("y",parseInt(yTexto)),a.setAttribute("x",parseInt(e+5)),a.setAttribute("y",parseInt(yTexto+15)),d.setAttribute("x",parseInt(e+5+95)),d.setAttribute("y",parseInt(yTexto+15)),l.setAttribute("x",parseInt(e+5)),l.setAttribute("y",parseInt(yTexto+30)),c.setAttribute("x",parseInt(e+5+95)),c.setAttribute("y",parseInt(yTexto+30)),h.setAttribute("x",parseInt(e+5)),h.setAttribute("y",parseInt(yTexto+45)),m.setAttribute("x",parseInt(e+5+95)),m.setAttribute("y",parseInt(yTexto+45)),u.setAttribute("x",parseInt(e+5)),u.setAttribute("y",parseInt(yTexto+60)),b.setAttribute("x",parseInt(e+5+95)),b.setAttribute("y",parseInt(yTexto+60)),p.setAttribute("x",parseInt(e+5)),p.setAttribute("y",parseInt(yTexto+75)),g.setAttribute("x",parseInt(e+5+95)),g.setAttribute("y",parseInt(yTexto+75)),f.setAttribute("x",parseInt(e+5)),f.setAttribute("y",parseInt(yTexto+90)),A.setAttribute("x",parseInt(e+5+95)),A.setAttribute("y",parseInt(yTexto+90)),document.getElementById("cuadro_"+this.nombreGrafico).appendChild(s),document.getElementById("cuadro_"+this.nombreGrafico).appendChild(r),document.getElementById("cuadro_"+this.nombreGrafico).appendChild(n),document.getElementById("cuadro_"+this.nombreGrafico).appendChild(a),document.getElementById("cuadro_"+this.nombreGrafico).appendChild(d),document.getElementById("cuadro_"+this.nombreGrafico).appendChild(l),document.getElementById("cuadro_"+this.nombreGrafico).appendChild(c),document.getElementById("cuadro_"+this.nombreGrafico).appendChild(h),document.getElementById("cuadro_"+this.nombreGrafico).appendChild(m),document.getElementById("cuadro_"+this.nombreGrafico).appendChild(u),document.getElementById("cuadro_"+this.nombreGrafico).appendChild(b),document.getElementById("cuadro_"+this.nombreGrafico).appendChild(p),document.getElementById("cuadro_"+this.nombreGrafico).appendChild(g),document.getElementById("cuadro_"+this.nombreGrafico).appendChild(f),document.getElementById("cuadro_"+this.nombreGrafico).appendChild(A),s.setAttribute("height",105),G.length<15)var M=15;else M=G.length;s.setAttribute("width",95+6*M),document.getElementById("cuadro_"+this.nombreGrafico).style.visibility="visible"},this.cuadroTooltip2=function(t,e,i,o){if(document.getElementById("cuadro_tooltip_2"+this.nombreGrafico)){var s=document.getElementById("cuadro_tooltip_2"+this.nombreGrafico),r=document.getElementById("estado_1_"+this.nombreGrafico);this.borrarChildNodes(r);var n=document.getElementById("estado_2_"+this.nombreGrafico);this.borrarChildNodes(n);var a=document.getElementById("descripcion_1_"+this.nombreGrafico);this.borrarChildNodes(a);var d=document.getElementById("descripcion_2_"+this.nombreGrafico);this.borrarChildNodes(d)}else{var l=document.createElementNS("http://www.w3.org/2000/svg","g");l.setAttribute("id","cuadro_2"+this.nombreGrafico),document.getElementById("svgelem_"+this.nombreGrafico).appendChild(l),(s=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("id","cuadro_tooltip_2"+this.nombreGrafico),s.setAttribute("rx","6"),s.setAttribute("ry","12"),s.setAttribute("style","fill:#FFFFFF; stroke:#000000"),(r=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id","estado_1_"+this.nombreGrafico),r.setAttribute("style",this.textTooltipb),(n=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id","estado_2_"+this.nombreGrafico),n.setAttribute("style",this.textTooltip),(a=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id","descripcion_1_"+this.nombreGrafico),a.setAttribute("style",this.textTooltipb),(d=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id","descripcion_2_"+this.nombreGrafico),d.setAttribute("style",this.textTooltip)}i+120>document.getElementById("contenedor_"+this.nombreGrafico).clientHeight&&(i=i-(i+120-document.getElementById("contenedor_"+this.nombreGrafico).clientHeight)-5);var c=document.createTextNode("Codigo:");r.appendChild(c);var h=document.createTextNode("Descripcion: ");a.appendChild(h);var m=this.datos[t][0].split("?");if(0==o){var u=m[0].split("/");if(""==u[u.length-1])var b=this.datos[t][0].split("?")[0];else b=u[u.length-1]}else b=m[0];if(-1==this.datos[t][9]||"NULL"==this.datos[t][9])var p=document.createTextNode("NO CAPTURADO");else p=document.createTextNode(this.datos[t][9]);if(""==this.datos[t][11]||"NULL"==this.datos[t][9])var g=document.createTextNode("NO REGISTRADO");else g=document.createTextNode(this.datos[t][11]);if("true"!=this.datos[t][10]&&201!=this.datos[t][9]?(n.setAttribute("fill","red"),d.setAttribute("fill","red"),r.setAttribute("fill","red"),a.setAttribute("fill","red")):(n.setAttribute("fill","black"),d.setAttribute("fill","black"),r.setAttribute("fill","black"),a.setAttribute("fill","black")),n.appendChild(p),d.appendChild(g),e+(70+7*b.length)>document.getElementById("contenedor_"+this.nombreGrafico).clientWidth&&(e-=e+70+7*b.length-document.getElementById("contenedor_"+this.nombreGrafico).clientWidth-5),e<0&&(e=0),s.setAttribute("y",parseInt(i)),s.setAttribute("x",parseInt(e)),yTexto=i+10,r.setAttribute("x",parseInt(e+5)),r.setAttribute("y",parseInt(yTexto)),n.setAttribute("x",parseInt(e+5+70)),n.setAttribute("y",parseInt(yTexto)),a.setAttribute("x",parseInt(e+5)),a.setAttribute("y",parseInt(yTexto+15)),d.setAttribute("x",parseInt(e+8+70)),d.setAttribute("y",parseInt(yTexto+15)),document.getElementById("cuadro_2"+this.nombreGrafico).appendChild(s),document.getElementById("cuadro_2"+this.nombreGrafico).appendChild(r),document.getElementById("cuadro_2"+this.nombreGrafico).appendChild(n),document.getElementById("cuadro_2"+this.nombreGrafico).appendChild(a),document.getElementById("cuadro_2"+this.nombreGrafico).appendChild(d),s.setAttribute("height",35),b.length<15);else b.length;var f=this.datos[t][11].length;s.setAttribute("width",70+6*f+20),document.getElementById("cuadro_2"+this.nombreGrafico).style.visibility="visible"},this.borraCuadro=function(){this.borrarChildNodes(),document.getElementById("cuadro_"+this.nombreGrafico).style.visibility="hidden",document.getElementById("cuadro_2"+this.nombreGrafico).style.visibility="hidden"},this.borrarChildNodes=function(t){if(t&&t.hasChildNodes())for(;t.childNodes.length>=1;)t.removeChild(t.firstChild)},this.cuadroTexto=function(t,e,i){texto=document.createTextNode(this.elementos[t]),document.getElementById("tspanTexto").removeChild(document.getElementById("tspanTexto").childNodes[0]),document.getElementById("tspanTexto").appendChild(texto),document.getElementById("cuadroTexto").x=parseInt(e),document.getElementById("cuadroTexto").y=parseInt(i),document.getElementById("cuadroTexto-rect").setAttribute("x",parseInt(e)),document.getElementById("cuadroTexto-rect").setAttribute("y",parseInt(i)),document.getElementById("cuadroTexto-text").setAttribute("x",parseInt(e)+5),document.getElementById("cuadroTexto-text").setAttribute("y",parseInt(i)+15),document.getElementById("cuadroTexto_"+this.nombreGrafico).style.visibility="visible"},this.borraCuadroTexto=function(){document.getElementById("cuadro_"+this.nombreGrafico)&&(document.getElementById("cuadro_"+this.nombreGrafico).style.visibility="hidden"),document.getElementById("cuadro_2"+this.nombreGrafico)&&(document.getElementById("cuadro_2"+this.nombreGrafico).style.visibility="hidden")},this.determinaColor=function(t){return-1!=t.toUpperCase().indexOf("HTML")?"#3561CE":-1!=t.toUpperCase().indexOf("JAVASCRIPT")?"#f4e74f":-1!=t.toUpperCase().indexOf("TEXT/JAVASCRIPT")?"#ec7911":-1!=t.toUpperCase().indexOf("audio")||-1!=t.toUpperCase().indexOf("x-music")||-1!=t.toUpperCase().indexOf("x-music")?"#f7f7f7":-1!=t.toUpperCase().indexOf("IMAGE")||-1!=t.toUpperCase().indexOf("vector/x-svf")?"#a64ef4":-1!=t.toUpperCase().indexOf("CSS")||-1!=t.toUpperCase().indexOf("dsssl")?"#8aa817":"#6e6e6e"},this.noData=function(t){var e=document.getElementById("svgelem_"+t),i=document.getElementById("fondo"),o=document.createElementNS("http://www.w3.org/2000/svg","image"),s=document.createElementNS("http://www.w3.org/2000/svg","text"),r=document.createTextNode("No se encontraron datos para este paso.");e.setAttribute("height",50),i.setAttribute("height",50),o.setAttributeNS(null,"height","15"),o.setAttributeNS(null,"width","15"),o.setAttributeNS("http://www.w3.org/1999/xlink","href","img/advertencia.png"),o.setAttributeNS(null,"x","240"),o.setAttributeNS(null,"y","23"),o.setAttributeNS(null,"visibility","visible"),s.setAttribute("x",260),s.setAttribute("y",36),s.setAttribute("id","txt"+t),s.setAttribute("fill","#525252"),s.setAttribute("class","textgris12"),s.appendChild(r),e.appendChild(o),e.appendChild(s)}}