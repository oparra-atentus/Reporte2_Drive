function disponibilidad(){var t=this;this.contenedor="",this.contenedor_div="",this.contenedor_svg="",this.nombreGrafico="",this.nombreObjeto="",this.link_eventos="t",this.color={"No Monitoreo":"#eeeeee","Uptime Global":"#54a51c","Downtime Global":"#d22129","Downtime Parcial":"#fdc72e","Marcado Especial":"#BE81F7"},this.day={0:"Domingo",1:"Lunes",2:"Martes",3:"Miércoles",4:"Jueves",5:"Viernes",6:"Sábado"},this.month={0:"Enero",1:"Febrero",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre",10:"Noviembre",11:"Diciembre"},this.resources="",this.grupos="",this.datos="",this.fechaMayor,this.fechaMenor,this.ancho=610,this.anchoTotal=715,this.escala=1,this.escalaActual=1,this.fechaSelect="",this.mesFinalizado=[],this.dias,this.altoCalendario=42,this.tipo="",this.vali=0,this.diasCalendario="",this.altoTotal="",this.alto="",this.fechaMayor="",this.fechaMenor="",this.segundosTotales="",this.diferenciaT="",this.dias="",this.monitor_id="",this.nodo_id="",this.horario_habil=[],colorEventoEspecial="rgb(190, 129, 247)",this.desasociar=function(){$("#"+this.contenedor_div).find('[class~="zoom"]').die("click"),$("#"+this.contenedor_div).find(".cuadro2 ").die("mousemove"),$("#"+this.contenedor_div).find(".cuadro2 ").die("mouseout"),$("#"+this.contenedor_div).die("mouseout")},this.creaSVG=function(){this.ancho=$("#"+this.contenedor_div).width()-100,this.anchoTotal=$("#"+this.contenedor_div).width()-10;var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("width",$("#"+this.contenedor_div).width()),t.setAttribute("id",this.contenedor_svg),t.setAttribute("xmlns","http://www.w3.org/2000/svg"),document.getElementById(this.contenedor_div).appendChild(t);var e=document.createElementNS("http://www.w3.org/2000/svg","rect");e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("id","fondo"),e.setAttribute("class","fondoBlanco"),e.setAttribute("style","fill:#ffffff"),t.appendChild(e);var i=document.createElementNS("http://www.w3.org/2000/svg","g");i.setAttribute("id",this.contenedor),t.appendChild(i)},this.asociar=function(){"simple"==t.tipo?t.altoCalendario=0:(this.creaSVG(),this.desasociar(),$("#"+this.contenedor_div).find(".cuadro2 ").live("mousemove",function(e){posX=e.pageX-$("#"+t.contenedor_div).offset().left,posY=e.pageY-$("#"+t.contenedor_div).offset().top,t.muestraTooltip($(this),posX,posY)}),$("#"+this.contenedor_div).find(".cuadro2 ").live("click",function(e){borderColor=$(this).css("fill"),colorEventoEspecial==borderColor&&(posX=e.pageX-$("#"+t.contenedor_div).offset().left,posY=e.pageY-$("#"+t.contenedor_div).offset().top,t.showModal($(this),posX,posY))}),$("#"+this.contenedor_div).live("mouseout",function(e){t.ocultaTooltip()}),$("#"+this.contenedor_div).find(".cuadro2 ").live("mouseout",function(e){t.restauraCuadro($(this))}),$("#"+this.contenedor_div).find('[class~="zoom"]').live("click",function(e){t.zoom(this.getAttribute("data-dia"),this.getAttribute("data-fecha"),this.getAttribute("data-equis"))}),"t"==this.link_eventos&&$("#"+this.contenedor_div).find(".cuadro2 ").live("click",function(t){pagina=this.getAttribute("pagina"),nodo=this.getAttribute("nodo"),paso=this.getAttribute("pasos"),fecha_monitoreo=this.getAttribute("fecha_monitoreo"),""!=nodo&&cargarSubItem("contenedor_11","subcontenedor_even_"+nodo,"11","141",["monitor_id",nodo,"paso_id",paso,"fecha_monitoreo",fecha_monitoreo,"pagina",pagina])}))},this.creaEscalas=function(){if(document.getElementById("eje_1"+this.nombreGrafico))var t=document.getElementById("eje_1"+this.nombreGrafico);else var t=document.createElementNS("http://www.w3.org/2000/svg","line");if(t.setAttribute("x1",95),t.setAttribute("x2",this.ancho*this.escala+95),t.setAttribute("y1",this.altoCalendario+this.alto),t.setAttribute("y2",this.altoCalendario+this.alto),t.setAttribute("id","eje_1"+this.nombreGrafico),t.setAttribute("class","separaciones7 negro"),document.getElementById("eje_2"+this.nombreGrafico))var e=document.getElementById("eje_2"+this.nombreGrafico);else var e=document.createElementNS("http://www.w3.org/2000/svg","line");var e=document.createElementNS("http://www.w3.org/2000/svg","line");if(e.setAttribute("x1",95),e.setAttribute("x2",95),e.setAttribute("y1",58),e.setAttribute("y2",this.altoCalendario+this.alto),e.setAttribute("id","eje_2"+this.nombreGrafico),e.setAttribute("class","separaciones7 negro"),document.getElementById("eje_2w"+this.nombreGrafico))var i=document.getElementById("eje_2w"+this.nombreGrafico);else var i=document.createElementNS("http://www.w3.org/2000/svg","line");var i=document.createElementNS("http://www.w3.org/2000/svg","line");i.setAttribute("x1",93),i.setAttribute("x2",93),i.setAttribute("y1",58),i.setAttribute("y2",this.altoCalendario+this.alto),i.setAttribute("id","eje_2w"+this.nombreGrafico),i.setAttribute("style","stroke:#FFFFFF; stroke-width:6px"),document.getElementById(this.contenedor).appendChild(t),document.getElementById(this.contenedor).appendChild(e),document.getElementById(this.contenedor).appendChild(t),document.getElementById(this.contenedor).appendChild(i),document.getElementById(this.contenedor).appendChild(e)},this.creaEjeY=function(t,e){var a,o,r=this.alto/this.resources.length,s=0,n=0;for(i=0;i<this.resources.length;i++){if("simple"==this.tipo?(i=this.resources.length-1,separacion=13):(separacion=this.alto+this.altoCalendario-r*this.resources.length+(this.resources.length-i-1)*r+13,this.resources.length-i-1==0&&1==e?separacion=this.alto+this.altoCalendario-20*this.resources.length+20*(this.resources.length-i-1)+5:separacion=this.alto+this.altoCalendario-20*this.resources.length+20*(this.resources.length-i-1)+8),s=this.alto+this.altoCalendario-r*i,o=this.resources[this.resources.length-i-1][0].split("-"),n=o.length-1,!document.getElementById("texto_"+this.resources[this.resources.length-i-1][0]+this.nombreGrafico)){if(document.getElementById("fondo_"+i+this.nombreGrafico))var d=document.getElementById("fondo_"+i+this.nombreGrafico);else var d=document.createElementNS("http://www.w3.org/2000/svg","rect");d.setAttribute("x",5),d.setAttribute("width",89),d.setAttribute("y",separacion-12),d.setAttribute("height",18),d.setAttribute("id","fondo_"+i+this.nombreGrafico),(i+1)%2==0?d.setAttribute("style","fill:rgb(243,241,238)"):d.setAttribute("style","fill:rgb(255,255,255)"),document.getElementById(this.contenedor).appendChild(d);var c=document.createElementNS("http://www.w3.org/2000/svg","text"),h=document.createTextNode(this.resources[this.resources.length-i-1][1][0].substr(0,17));c.setAttribute("x",5),c.setAttribute("y",separacion),c.setAttribute("id","texto_"+this.resources[this.resources.length-i-1][0]+this.nombreGrafico),alt=this.alto+this.altoCalendario-r*this.resources.length+10,i+1!=this.resources.length||"consolidada"!=this.tipo&&"consolidada_monitor"!=this.tipo?c.setAttribute("class","escala9"):c.setAttribute("class","escala9b"),c.setAttribute("width","16"),c.appendChild(h),document.getElementById(this.contenedor).appendChild(c)}if(a=this.creaBarras(t,this.resources[this.resources.length-i-1][0],this.alto+this.altoCalendario-r*this.resources.length,this.resources.length-i-1,e),document.getElementById("linea_"+i+this.nombreGrafico))var l=document.getElementById("linea_"+i+this.nombreGrafico);else var l=document.createElementNS("http://www.w3.org/2000/svg","line");l.setAttribute("x1",95),l.setAttribute("x2",this.escala*this.ancho+96),l.setAttribute("y1",this.alto+this.altoCalendario-r*i),l.setAttribute("y2",this.alto+this.altoCalendario-r*i),l.setAttribute("id","linea_"+i+this.nombreGrafico),l.setAttribute("class","separaciones4 plomo"),document.getElementById(this.contenedor).appendChild(l)}},this.creaCalendario=function(t){var a,o,r,s=96,n=0,d=0,c=96,h=0,l=0,m=0,u=0,p=this.fechaMenor,b=17,g=0,_=0,f=Math.round(this.diasCalendario/30),A="text-remove";if(0==f&&(dasDibujable=1),$("."+A).remove(),1>t&&(t=1),this.dias<1?espacio2=this.ancho:espacio2=this.ancho/this.dias,document.getElementById("linea_base"+this.nombreGrafico))var v=document.getElementById("linea_base"+this.nombreGrafico);else var v=document.createElementNS("http://www.w3.org/2000/svg","line");if(v.setAttribute("x1",95),v.setAttribute("x2",this.ancho*this.escala+95),v.setAttribute("y1",53),v.setAttribute("y2",53),v.setAttribute("id","linea_base"+this.nombreGrafico),v.setAttribute("style","stroke:rgb(204,180,139)"),document.getElementById("linea_dias_semana"+this.nombreGrafico))var I=document.getElementById("linea_dias_semana"+this.nombreGrafico);else var I=document.createElementNS("http://www.w3.org/2000/svg","line");if(I.setAttribute("x1",95),I.setAttribute("x2",this.ancho*this.escala+95),I.setAttribute("y1",37),I.setAttribute("y2",37),I.setAttribute("id","linea_dias_semana"+this.nombreGrafico),I.setAttribute("style","stroke:rgb(204,180,139)"),document.getElementById("linea_semana_mes"+this.nombreGrafico))var y=document.getElementById("linea_semana_mes"+this.nombreGrafico);else var y=document.createElementNS("http://www.w3.org/2000/svg","line");if(y.setAttribute("x1",95),y.setAttribute("x2",this.ancho*this.escala+95),y.setAttribute("y1",20),y.setAttribute("y2",20),y.setAttribute("id","linea_semana_mes"+this.nombreGrafico),y.setAttribute("style","stroke:rgb(204,180,139)"),document.getElementById("vert_calendario"+this.nombreGrafico))var C=document.getElementById("vert_calendario"+this.nombreGrafico);else var C=document.createElementNS("http://www.w3.org/2000/svg","line");if(C.setAttribute("x1",95),C.setAttribute("x2",95),C.setAttribute("y1",2),C.setAttribute("y2",53),C.setAttribute("id","vert_calendario"+this.nombreGrafico),C.setAttribute("style","stroke:rgb(204,180,139)"),document.getElementById("vert_calendario2"+this.nombreGrafico))var w=document.getElementById("vert_calendario2"+this.nombreGrafico);else var w=document.createElementNS("http://www.w3.org/2000/svg","line");if(w.setAttribute("x1",96+this.ancho*this.escala),w.setAttribute("x2",96+this.ancho*this.escala),w.setAttribute("y1",2),w.setAttribute("y2",53),w.setAttribute("id","vert_calendario2"+this.nombreGrafico),w.setAttribute("style","stroke:rgb(204,180,139)"),document.getElementById("hor_calendario"+this.nombreGrafico))var T=document.getElementById("hor_calendario"+this.nombreGrafico);else var T=document.createElementNS("http://www.w3.org/2000/svg","line");if(T.setAttribute("x1",95),T.setAttribute("x2",95+this.ancho*this.escala),T.setAttribute("y1",2),T.setAttribute("y2",2),T.setAttribute("id","hor_calendario"+this.nombreGrafico),T.setAttribute("style","stroke:rgb(204,180,139)"),document.getElementById("fondo_calendario"+this.nombreGrafico))var E=document.getElementById("fondo_calendario"+this.nombreGrafico);else var E=document.createElementNS("http://www.w3.org/2000/svg","rect");for(E.setAttribute("x",95),E.setAttribute("height",50),E.setAttribute("width",this.ancho*this.escala+"px"),E.setAttribute("y",2),E.setAttribute("id","fondo_calendario"+this.nombreGrafico),E.setAttribute("focusable","true"),E.setAttribute("style","fill:rgb(240, 237, 232);	opacity:0.9;cursor:pointer"),document.getElementById(this.contenedor).appendChild(E),i=0;i<this.diasCalendario;i++){if(u++,i>0){fete=p;var p=new Date(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()+1);p=p}if(i<=0){var p=this.fechaMenor;esc=1;var x=p.getUTCDate(),U=p.getUTCMonth(),B=p.getUTCFullYear();10>U&&(U="0"+U),10>x&&(x="0"+x);var M=this.formateaFecha2(String(B)+"."+String(U)+"."+String(x)+".00.00.00");M=new Date(M.getUTCFullYear(),M.getUTCMonth()+1,M.getUTCDate()),r=this.diferenciaEntreFechas(this.fechaMenor,this.fechaMayor)<86400?espacio2*((M-p)/1e3)/((this.fechaMayor.valueOf()-this.fechaMenor.valueOf())/1e3):espacio2*this.diferenciaEntreFechas(p,M)/86400,g=96+r*i*esc,_=-(r*t)+96}else r=espacio2,esc=t;"global"==this.tipo?(x=p.getUTCDate(),U=p.getUTCMonth(),B=p.getUTCFullYear(),10>U&&(U="0"+U),10>x&&(x="0"+x),M=new Date(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()+1),M.getUTCDate()<10?dia2="0"+M.getUTCDate():dia2=M.getUTCDate(),M.getUTCMonth()+1<10?mes2="0"+(parseInt(M.getUTCMonth())+1):mes2=parseInt(M.getUTCMonth())+1,M=new Date(this.parseISO8601ToTimestamp(M.getUTCFullYear()+"-"+mes2+"-"+dia2+"T00:00:00Z")),this.diasCalendario>=1?this.diferenciaEntreFechas(this.fechaMenor,this.fechaMayor)<86400?(M>this.fechaMayor&&(M=this.fechaMayor),asd1=this.diferenciaEntreFechas(p,M),asd2=this.diferenciaEntreFechas(this.fechaMenor,this.fechaMayor),i>0?r=espacio2-espacioTemp:(r=espacio2*this.diferenciaEntreFechas(p,M)/this.diferenciaEntreFechas(this.fechaMenor,this.fechaMayor),espacioTemp=r)):0==i?(asd=this.diferenciaEntreFechas(this.fechaMenor,M),r=espacio2*this.diferenciaEntreFechas(this.fechaMenor,M)/86400,g=96):r=i+1==this.diasCalendario?espacio2*(this.diferenciaEntreFechas(M,this.fechaMayor)+86400)/86400:espacio2:r=espacio2):r=espacio2;var G=g+r*t/24;if(t>=7){espacio2*((M-p)/1e3)/((this.fechaMayor.valueOf()-this.fechaMenor.valueOf())/1e3);for(e=0;e<24;e++){if(document.getElementById("text_hora_"+e+"_"+parseInt(parseInt(p.getUTCDate())+1)+this.nombreGrafico))var j=document.getElementById("text_hora_"+e+"_"+parseInt(parseInt(p.getUTCDate())+1)+this.nombreGrafico),F=document.getElementById("hora_"+e+"_"+parseInt(parseInt(p.getUTCDate())+1)+this.nombreGrafico);else{var j=document.createElementNS("http://www.w3.org/2000/svg","text"),N=document.createTextNode(e);j.appendChild(N);var F=document.createElementNS("http://www.w3.org/2000/svg","rect")}j.setAttribute("y",50),j.setAttribute("id","text_hora_"+e+"_"+parseInt(parseInt(p.getUTCDate())+1)+this.nombreGrafico),j.setAttribute("class","escala9 zoom "+A),j.setAttribute("data-fecha","hora_"+e+"_"+parseInt(parseInt(p.getUTCDate())+1)+"_"+p.getUTCFullYear()),j.setAttribute("data-dia",this.dias),F.setAttribute("x",G),F.setAttribute("class","zoom "+A),F.setAttribute("data-fecha","hora_"+e+"_"+parseInt(parseInt(p.getUTCMonth())+1)+"_"+p.getUTCFullYear()),F.setAttribute("data-dia",this.dias),F.setAttribute("height",b),F.setAttribute("width",r*t/24),F.setAttribute("y",50),F.setAttribute("focusable","true"),F.setAttribute("style","fill:rgb(245, 237, 232);	opacity:0;cursor:pointer"),F.setAttribute("id","hora_"+e+"_"+parseInt(parseInt(p.getUTCDate())+1)+this.nombreGrafico);var D;if(D=parseInt(p.getUTCDate())>9?G-16:G-13,j.setAttribute("x",D),document.getElementById("linea_hora"+e+"_"+parseInt(parseInt(p.getUTCDate())+1)+this.nombreGrafico))var T=document.getElementById("linea_hora"+e+"_"+parseInt(parseInt(p.getUTCDate())+1)+this.nombreGrafico);else var T=document.createElementNS("http://www.w3.org/2000/svg","line");T.setAttribute("x1",G),T.setAttribute("x2",G),T.setAttribute("y1",36),T.setAttribute("y2",54),T.setAttribute("id","linea_hora"+e+"_"+parseInt(parseInt(p.getUTCDate())+1)+this.nombreGrafico),T.setAttribute("class","line_hora "+A),T.setAttribute("style","stroke:rgb(204,180,139)"),G+=r*t/24,document.getElementById(this.contenedor).appendChild(j),document.getElementById(this.contenedor).appendChild(F),document.getElementById(this.contenedor).appendChild(T)}}if(document.getElementById("text_dia_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico))if(t>=7){$("#text_dia_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico).remove();var j=document.createElementNS("http://www.w3.org/2000/svg","text"),N=document.createTextNode(p.getUTCDate());j.appendChild(N)}else var j=document.getElementById("text_dia_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),F=document.getElementById("dia_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico);else{var j=document.createElementNS("http://www.w3.org/2000/svg","text"),N=document.createTextNode(p.getUTCDate());j.appendChild(N);var F=document.createElementNS("http://www.w3.org/2000/svg","rect")}if(7>t?(j.setAttribute("y",47),j.setAttribute("data-dia",this.dias)):(j.setAttribute("y",31),j.setAttribute("data-dia",1)),j.setAttribute("id","text_dia_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),j.setAttribute("class","escala9 zoom"),j.setAttribute("data-fecha","dia_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+"_"+p.getUTCFullYear()),0==i?(F.setAttribute("data-equis",0),j.setAttribute("data-equis",0)):(F.setAttribute("data-equis",g-96),j.setAttribute("data-equis",g-96)),F.setAttribute("x",g),F.setAttribute("class","zoom"),F.setAttribute("data-fecha","dia_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+"_"+p.getUTCFullYear()),F.setAttribute("data-dia",this.dias),F.setAttribute("height",b),F.setAttribute("width",r*t),F.setAttribute("y",36),F.setAttribute("focusable","true"),F.setAttribute("style","fill:rgb(240, 237, 232);	opacity:0;cursor:pointer"),F.setAttribute("id","dia_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),parseInt(p.getUTCDate())>9?xval=g+r*t/2-4:xval=g+r*t/2,f%2==0?i%f!=0&&1==t&&f>1&&0!=i?(j.setAttribute("x",xval+r/2),j.setAttribute("display","none")):(j.setAttribute("display",""),1==t&&f>1&&i>0?(j.setAttribute("x",xval+r*(f-1)/2),xval+r*(f-1)/2>this.ancho*this.escala+90&&j.setAttribute("display","none")):(j.setAttribute("x",xval),xval-5>this.ancho*this.escala+90&&j.setAttribute("display","none"))):(i+1)%f!=0&&1==t&&f>1&&0!=i?(j.setAttribute("x",xval+r/2),j.setAttribute("display","none")):(j.setAttribute("display",""),1==t&&f>1&&i>0?(j.setAttribute("x",xval+r*(f-1)/2),xval+r*(f-1)/2>this.ancho*this.escala+90&&j.setAttribute("display","none")):(j.setAttribute("x",xval),xval-5>this.ancho*this.escala+90&&j.setAttribute("display","none"))),t>=7){if(document.getElementById("linea_dia"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico)){$("#linea_dia"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico).remove();var S=document.createElementNS("http://www.w3.org/2000/svg","line")}else var S=document.createElementNS("http://www.w3.org/2000/svg","line");S.setAttribute("x1",g+r*t),S.setAttribute("x2",g+r*t),S.setAttribute("y1",20),S.setAttribute("y2",37),S.setAttribute("id","linea_dia"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),S.setAttribute("class","line_dia "+A),S.setAttribute("style","stroke:rgb(204,180,139)"),document.getElementById(this.contenedor).appendChild(S)}else{if(document.getElementById("linea_dia"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico))var S=document.getElementById("linea_dia"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico);else var S=document.createElementNS("http://www.w3.org/2000/svg","line");S.setAttribute("x1",g+r*t),S.setAttribute("x2",g+r*t),S.setAttribute("y1",37),S.setAttribute("y2",53),S.setAttribute("id","linea_dia"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),S.setAttribute("style","stroke:rgb(204,180,139)"),document.getElementById(this.contenedor).appendChild(S)}if(document.getElementById(this.contenedor).appendChild(F),document.getElementById(this.contenedor).appendChild(j),_=g,g+=r*t,a=g-s,d=r*i*esc+r*t-n,o=s+a-c,x2MesZoom=n+d-h,numCar=a/8,0==p.getUTCDay()){if(ultimaSemana="semana_"+this.inicioSemana(p,!1),document.getElementById("text_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico)){if(t>=7){$("#text_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico).remove();var j=document.createElementNS("http://www.w3.org/2000/svg","text");j.setAttribute("id","text_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico)}else var j=document.getElementById("text_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico);var F=document.getElementById("semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),P=document.getElementById("rect2_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),O=document.getElementById("clip_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico)}else{var j=document.createElementNS("http://www.w3.org/2000/svg","text");j.setAttribute("id","text_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico);var F=document.createElementNS("http://www.w3.org/2000/svg","rect");F.setAttribute("id","semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico); var O=document.createElementNS("http://www.w3.org/2000/svg","clipPath");O.setAttribute("id","clip_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico);var P=document.createElementNS("http://www.w3.org/2000/svg","rect");P.setAttribute("id","rect2_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico)}for(;j.childNodes.length>=1;)j.removeChild(j.firstChild);mensaje="Semana del "+this.inicioSemana(p,!1);var N=document.createTextNode(mensaje.substr(0,numCar));if(j.appendChild(N),j.setAttribute("x",s+10),F.setAttribute("x",s),t>=7?j.setAttribute("y",15):j.setAttribute("y",31),j.setAttribute("class","escala9 zoom 3"),j.setAttribute("data-fecha","semana_"+this.inicioSemana(p,!1)+"_"+parseInt(parseInt(p.getUTCMonth())+1)+"_"+p.getUTCFullYear()),j.setAttribute("data-dia",this.dias/u),j.setAttribute("data-equis",s),F.setAttribute("class","escala9"),F.setAttribute("class","zoom"),F.setAttribute("data-fecha","semana_"+this.inicioSemana(p,!1)+"_"+parseInt(parseInt(p.getUTCMonth())+1)+"_"+p.getUTCFullYear()),F.setAttribute("data-dia",this.dias/u),F.setAttribute("data-equis",s),F.setAttribute("height",b),F.setAttribute("width",a),F.setAttribute("y",20),F.setAttribute("style","fill:rgb(240, 237, 232);	opacity:0;cursor:pointer"),u=0,P.setAttribute("height",b),P.setAttribute("width",a),P.setAttribute("x",s),P.setAttribute("y",20),O.appendChild(P),document.getElementById(this.contenedor).appendChild(F),document.getElementById(this.contenedor).appendChild(O),document.getElementById(this.contenedor).appendChild(j),document.getElementById("linea_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico))var k=document.getElementById("linea_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico);else var k=document.createElementNS("http://www.w3.org/2000/svg","line");k.setAttribute("x1",s+a),k.setAttribute("x2",s+a),k.setAttribute("y1",20),k.setAttribute("y2",37),k.setAttribute("id","linea_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),k.setAttribute("style","stroke:rgb(204,180,139)"),document.getElementById(this.contenedor).appendChild(k),s+=a,n+=d,l++}if(numCarMes=o/8,this.finMes(p)){if(this.mesFinalizado[parseInt(parseInt(p.getUTCMonth())+1)]=1,document.getElementById("text_mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico))var j=document.getElementById("text_mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),F=document.getElementById("mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),P=document.getElementById("rect2_mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),O=document.getElementById("clip_mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico);else{var j=document.createElementNS("http://www.w3.org/2000/svg","text");j.setAttribute("id","text_mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico);var F=document.createElementNS("http://www.w3.org/2000/svg","rect"),O=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),P=document.createElementNS("http://www.w3.org/2000/svg","rect");O.setAttribute("id","clip_mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),F.setAttribute("id","mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),P.setAttribute("id","rect2_mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico)}for(c-90+(c+o)/2>c?j.setAttribute("x",c-40+o/2):j.setAttribute("x",c+6);j.childNodes.length>=1;)j.removeChild(j.firstChild);mensajeMes=this.month[p.getUTCMonth()]+" "+p.getUTCFullYear();var Y=document.createTextNode(mensajeMes.substr(0,numCarMes));if(j.appendChild(Y),j.setAttribute("y",15),j.setAttribute("class","escala9 zoom"),j.setAttribute("data-dia",1),j.setAttribute("data-fecha","mes_"+parseInt(parseInt(p.getUTCMonth())+1)+"_"+p.getUTCFullYear()),j.setAttribute("data-equis",h),F.setAttribute("class","escala9"),F.setAttribute("class","zoom"),F.setAttribute("data-dia",1),F.setAttribute("data-fecha","mes_"+parseInt(parseInt(p.getUTCMonth())+1)+"_"+p.getUTCFullYear()),F.setAttribute("data-equis",h),F.setAttribute("x",c),F.setAttribute("height",b),F.setAttribute("width",o),F.setAttribute("y",3),F.setAttribute("style","fill:rgb(240, 237, 232);	opacity:0;cursor:pointer"),P.setAttribute("x",c),P.setAttribute("height",b),P.setAttribute("width",o),P.setAttribute("y",3),O.appendChild(P),document.getElementById(this.contenedor).appendChild(F),document.getElementById(this.contenedor).appendChild(O),document.getElementById(this.contenedor).appendChild(j),document.getElementById("linea_mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico))var z=document.getElementById("linea_mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico);else var z=document.createElementNS("http://www.w3.org/2000/svg","line");z.setAttribute("x1",c+o),z.setAttribute("x2",c+o),z.setAttribute("y1",3),z.setAttribute("y2",20),z.setAttribute("id","linea_mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),z.setAttribute("style","stroke:rgb(204,180,139)"),document.getElementById(this.contenedor).appendChild(z),m++,c+=o,h+=x2MesZoom}}if(numCar=a/8,0!=p.getUTCDay()){if(document.getElementById("text_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico))var F=document.getElementById("semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),P=document.getElementById("rect2_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),j=document.getElementById("text_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),O=document.getElementById("clip_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico);else{var j=document.createElementNS("http://www.w3.org/2000/svg","text");j.setAttribute("id","text_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico);var F=document.createElementNS("http://www.w3.org/2000/svg","rect");F.setAttribute("id","semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico);var O=document.createElementNS("http://www.w3.org/2000/svg","clipPath");O.setAttribute("id","clip_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico);var P=document.createElementNS("http://www.w3.org/2000/svg","rect");P.setAttribute("id","rect2_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico)}for(;j.childNodes.length>=1;)j.removeChild(j.firstChild);mensaje="Semana del "+this.inicioSemana(p,!0);var N=document.createTextNode(mensaje.substr(0,numCar));if(j.appendChild(N),j.setAttribute("x",s+10),F.setAttribute("x",s),t>=7?j.setAttribute("y",15):j.setAttribute("y",31),j.setAttribute("class","escala9 zoom"),j.setAttribute("data-dia",this.dias/u),j.setAttribute("data-fecha","semana_"+this.inicioSemana(p,!0)+"_"+parseInt(parseInt(p.getUTCMonth())+1)+"_"+p.getUTCFullYear()),j.setAttribute("data-equis",s),F.setAttribute("class","zoom"),F.setAttribute("data-dia",this.dias/u),F.setAttribute("data-fecha","semana_"+this.inicioSemana(p,!0)+"_"+parseInt(parseInt(p.getUTCMonth())+1)+"_"+p.getUTCFullYear()),F.setAttribute("data-equis",s),F.setAttribute("height",b),F.setAttribute("width",a),F.setAttribute("y",20),F.setAttribute("style","fill:rgb(240, 237, 232);	opacity:0;cursor:pointer"),u=0,P.setAttribute("height",b),P.setAttribute("width",a),P.setAttribute("x",s),P.setAttribute("y",20),O.appendChild(P),document.getElementById(this.contenedor).appendChild(O),document.getElementById(this.contenedor).appendChild(F),document.getElementById(this.contenedor).appendChild(j),document.getElementById("linea_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico))var k=document.getElementById("linea_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico);else var k=document.createElementNS("http://www.w3.org/2000/svg","line");k.setAttribute("x1",s+a),k.setAttribute("x2",s+a),k.setAttribute("y1",20),k.setAttribute("y2",37),k.setAttribute("id","linea_semana_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),k.setAttribute("style","stroke:rgb(204,180,139)"),document.getElementById(this.contenedor).appendChild(k),s=a,n=d}if(numCarMes=o/8,1!=this.mesFinalizado[parseInt(parseInt(p.getUTCMonth())+1)]){if(document.getElementById("text_mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico))var j=document.getElementById("text_mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),F=document.getElementById("mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),P=document.getElementById("rect2_mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),O=document.getElementById("clip_mes_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico);else{var j=document.createElementNS("http://www.w3.org/2000/svg","text");j.setAttribute("id","text_mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico);var F=document.createElementNS("http://www.w3.org/2000/svg","rect"),O=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),P=document.createElementNS("http://www.w3.org/2000/svg","rect");O.setAttribute("id","clip_mes_"+p.getUTCDate()+"_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),F.setAttribute("id","mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),P.setAttribute("id","rect2_mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico)}for(;j.childNodes.length>=1;)j.removeChild(j.firstChild);mensajeMes=this.month[p.getUTCMonth()]+" "+p.getUTCFullYear();var Y=document.createTextNode(mensajeMes.substr(0,numCarMes));if(j.appendChild(Y),F.setAttribute("x",c),j.setAttribute("x",c+o/2),j.setAttribute("y",15),j.setAttribute("id","text_mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),j.setAttribute("class","escala9 zoom"),j.setAttribute("data-dia",1),j.setAttribute("data-fecha","mes_"+parseInt(parseInt(p.getUTCMonth())+1)+"_"+p.getUTCFullYear()),j.setAttribute("data-equis",h),F.setAttribute("class","zoom"),F.setAttribute("data-dia",1),F.setAttribute("data-fecha","mes_"+parseInt(parseInt(p.getUTCMonth())+1)+"_"+p.getUTCFullYear()),F.setAttribute("data-equis",h),F.setAttribute("height",b),F.setAttribute("width",o),F.setAttribute("y",3),F.setAttribute("id","mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),F.setAttribute("style","fill:rgb(240, 237, 232);	opacity:0 ;cursor:pointer"),P.setAttribute("x",c),P.setAttribute("height",b),P.setAttribute("width",o),P.setAttribute("y",3),O.appendChild(P),document.getElementById(this.contenedor).appendChild(F),document.getElementById(this.contenedor).appendChild(O),7>t&&document.getElementById(this.contenedor).appendChild(j),document.getElementById("linea_mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico))var z=document.getElementById("linea_mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico);else var z=document.createElementNS("http://www.w3.org/2000/svg","line");z.setAttribute("x1",c+o),z.setAttribute("x2",c+o),z.setAttribute("y1",3),z.setAttribute("y2",20),z.setAttribute("id","linea_mes_"+parseInt(parseInt(p.getUTCMonth())+1)+this.nombreGrafico),z.setAttribute("style","stroke:rgb(204,180,139)"),document.getElementById(this.contenedor).appendChild(z),s=a,n=d}document.getElementById(this.contenedor).appendChild(v),document.getElementById(this.contenedor).appendChild(I),document.getElementById(this.contenedor).appendChild(y),document.getElementById(this.contenedor).appendChild(C),document.getElementById(this.contenedor).appendChild(w),document.getElementById(this.contenedor).appendChild(T)},this.finMes=function(t){var e=t.getUTCMonth();return t=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()+1),e!=t.getUTCMonth()?!0:!1},this.inicioSemana=function(t,e){var i=t.valueOf(),a=t.getUTCDay();return a=1==e?6-(6-parseInt(a)+1):6,i=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()-a),i=new Date(i),i.getUTCDate()},this.creaBarras=function(t,e,i,a,o){var r,s=0,n=1;this.resources.length-1;1>t&&(t=1),r=(this.fechaMayor-this.fechaMenor)/1e3,espacio=this.ancho/r,0==a&&1==o?(grosor=16,separacion=i+20+20*a-4):(grosor=16,separacion=i+20+20*a-4),"simple"==this.tipo&&(separacion=0,grosor=16),n=0;var d=document.createElementNS("http://www.w3.org/2000/svg","g");for(d.setAttribute("id","grupo_"+e+this.nombreGrafico),d.setAttribute("y",0),document.getElementById(this.contenedor).appendChild(d),-1!=e.indexOf("-")&&(d.style.visibility="visible"),this.datos[e]&&(nodo=e.split("-")[1]),paso=e.split("-")[2],paginas=this.datos[e].length,void 0===nodo&&(nodo=""),void 0===paso&&(paso="");this.datos[e][n];){if(paginas%6==0?pagina=paginas/6:pagina=parseInt(paginas/6)+1,paginas--,diferencia=(this.formateaFecha2(this.datos[e][n][0])-this.fechaMenor)/1e3,1>n?x1=diferencia*espacio+96:x1=t*diferencia*espacio+96,diferencia=(this.formateaFecha2(this.datos[e][n][1])-this.formateaFecha2(this.datos[e][n][0]))/1e3,x2=t*diferencia*espacio,fecha_monitoreo=this.formateaFecha2(this.datos[e][n][0]),document.getElementById("rect_"+e+"_"+n+"_"+this.nombreGrafico))c=document.getElementById("rect_"+e+"_"+n+"_"+this.nombreGrafico);else var c=document.createElementNS("http://www.w3.org/2000/svg","rect");c.setAttribute("x",x1),c.setAttribute("id","rect_"+e+"_"+n+"_"+this.nombreGrafico),c.setAttribute("height",grosor),c.setAttribute("pagina",pagina),c.setAttribute("fecha_monitoreo",fecha_monitoreo),c.setAttribute("nodo",nodo),c.setAttribute("pasos",paso),x2>1?c.setAttribute("width",x2+.4):c.setAttribute("width",1),c.setAttribute("y",separacion),c.setAttribute("class","cuadro2 "+this.nombreGrafico),c.setAttribute("style","fill:"+this.color[this.datos[e][n][2]]),document.getElementById("grupo_"+e+this.nombreGrafico).appendChild(c),n++}return s++,d},this.buscaFechaMayor=function(){for(var t=0,e=0,i=this.formateaFecha2("2000.01.01.00.00.00");this.resources[t];){if(this.datos[this.resources[t][0]])for(;this.datos[this.resources[t][0]][e];)i<this.formateaFecha2(this.datos[this.resources[t][0]][e][1])&&(i=this.formateaFecha2(this.datos[this.resources[t][0]][e][1])),e++;t++}return i},this.creaBarraZonaHoraria=function(t,e,i){var a,o=1;this.resources.length-1;1>t&&(t=1),a=(this.fechaMayor-this.fechaMenor)/1e3,espacio=this.ancho/a;for(var r=0;r<this.horario_habil.length;r++){if(diferencia=(this.formateaFecha2(this.horario_habil[r][0])-this.fechaMenor)/1e3,1>r&&7>t?x1=diferencia*espacio+96:x1=t*diferencia*espacio+96,diferencia=(this.formateaFecha2(this.horario_habil[r][1])-this.formateaFecha2(this.horario_habil[r][0]))/1e3,x2=t*diferencia*espacio,fecha_monitoreo=this.formateaFecha2(this.horario_habil[r][0]),document.getElementById("rect__"+r+"_"+o+"_"+i+"_zona"+this.nombreGrafico))s=document.getElementById("rect__"+r+"_"+o+"_"+i+"_zona"+this.nombreGrafico);else var s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("x",x1),s.setAttribute("id","rect__"+r+"_"+o+"_"+i+"_zona"+this.nombreGrafico),s.setAttribute("height",this.alto+this.altoCalendario-54),s.setAttribute("fecha_monitoreo",fecha_monitoreo),x2>1?s.setAttribute("width",x2+.4):s.setAttribute("width",1),s.setAttribute("y",this.altoCalendario+12),s.setAttribute("class","cuadrozona "+this.nombreGrafico),s.setAttribute("style","fill:rgba(84,165,28,0.2)"),document.getElementById("rect__"+r+"_"+o+"_"+i+"_zona"+this.nombreGrafico)||document.getElementById(this.contenedor).appendChild(s),o++}return s},this.buscaFechaMenor=function(){for(var t=0,e=0,i=this.formateaFecha2("2100.01.01.00.00.00");this.resources[t];){if(e=0,this.datos[this.resources[t][0]])for(;this.datos[this.resources[t][0]][e];)i>this.formateaFecha2(this.datos[this.resources[t][0]][e][0])&&(i=this.formateaFecha2(this.datos[this.resources[t][0]][e][0])),e++;t++}return i},this.transformaHoraSegundos=function(t,e){var i,a;i=this.formateaFecha2(this.fechaInicio),a=this.formateaFecha2(this.fechaFin);return parseInt(segundos)},this.formateaFecha=function(t){return temp=t.split("."),t=temp[2]+"-"+temp[1]+"-"+temp[0]},this.formateaFecha2=function(t){var e=t.substring(11,19);e=e.split(".");var t=t.substring(0,13);return t=this.formateaFecha(t),fecha2=t.split("-"),t=t.split("-"),t=new Date(this.parseISO8601ToTimestamp(t[2]+"-"+t[1]+"-"+t[0]+"T"+e[0]+":"+e[1]+":"+e[2]+"Z"))},this.diferenciaEntreFechas=function(t,e){return diferencia=(e-t)/1e3,diferencia},this.parseISO8601ToTimestamp=function(t){var e,i,a=0,o=[1,4,5,6,7,10,11];if(i=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(t)){for(var r,s=0;r=o[s];++s)i[r]=+i[r]||0;i[2]=(+i[2]||1)-1,i[3]=+i[3]||1,"Z"!==i[8]&&void 0!==i[9]&&(a=60*i[10]+i[11],"+"===i[9]&&(a=0-a)),e=Date.UTC(i[1],i[2],i[3],i[4],i[5]+a,i[6],i[7])}else e=NaN;return e},this.zoom=function(t,e,i){parseFloat(t)<1?this.escala=1:this.escala=parseFloat(t),this.escalaActual>=this.escala?porcentaje=this.escala/this.escalaActual:porcentaje=this.escala/this.escalaActual,document.getElementById(this.contenedor).getAttribute("x")?valorX=document.getElementById(this.contenedor).getAttribute("x"):valorX=0,escalaAnterior=this.escalaActual,document.getElementById(this.contenedor).setAttribute("width",this.ancho*this.escala+120),document.getElementById(this.contenedor_svg).setAttribute("width",this.ancho*this.escala+120);this.ancho*this.escala+120;this.escalaActual=this.escala,escalat=this.escala,this.creaBarraZonaHoraria(this.escala,!0,this.monitor_id),this.creaEjeY(this.escala),this.creaCalendario(t),this.creaEscalas(),document.getElementById(this.contenedor).setAttribute("x",parseFloat(i*this.escala)),fechaTemp=e.split("_"),1==t&&(fechaSelect=new Date(fechaTemp[2],fechaTemp[1]-1,"01","00","00","00")),(4==t||8==t)&&(fechaSelect=new Date(fechaTemp[3],fechaTemp[2]-1,fechaTemp[1],"00","00","00")),$('[id="'+this.contenedor_div+'"]').scrollLeft(parseFloat(porcentaje*i))},this.muestraTooltip=function(t,e,a){if(nombre=$(t).attr("id"),nombre=nombre.split("_"),elemento=nombre[1],indice=nombre[2],rectangulo_nombre=$(t).attr("id"),anchoBarra=parseFloat(t.attr("width")),color_tooltip=t.attr("style"),color_tooltip=color_tooltip.split(":"),color_tooltip=color_tooltip[1],rect4n=document.getElementById(rectangulo_nombre),rect4n.setAttribute("style","fill:"+color_tooltip+"; stroke:#000000"),xoriginal=e,a=a+$('[id="'+this.contenedor_div+'"]').scrollTop()+10,e+=$('[id="'+this.contenedor_div+'"]').scrollLeft(),altoTotal=document.getElementById(this.contenedor).getAttribute("height"),document.getElementById("tooltip"+this.nombreGrafico))var o=document.getElementById("tooltip"+this.nombreGrafico);else{var o=document.createElementNS("http://www.w3.org/2000/svg","g");o.setAttribute("id","tooltip"+this.nombreGrafico),document.getElementById(this.contenedor).appendChild(o)}if(document.getElementById("rect_tooltip"+this.nombreGrafico)){var r=document.getElementById("rect_tooltip"+this.nombreGrafico);r.setAttribute("style","fill:rgb(255,255,255); stroke:"+color_tooltip+"; stroke-width:2px")}else{var r=document.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("id","rect_tooltip"+this.nombreGrafico),r.setAttribute("rx","10"),r.setAttribute("ry","10"),r.setAttribute("style","fill:rgb(255,255,255); stroke:"+color_tooltip+"; stroke-width:2px"),o.appendChild(r)}if(document.getElementById("texto1_tooltip"+this.nombreGrafico)){var s=document.getElementById("texto1_tooltip"+this.nombreGrafico);s.removeChild(s.childNodes[0])}else{var s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("id","texto1_tooltip"+this.nombreGrafico),s.setAttribute("class","escala9"),o.appendChild(s)}if(document.getElementById("texto2_tooltip"+this.nombreGrafico)){var n=document.getElementById("texto2_tooltip"+this.nombreGrafico);n.removeChild(n.childNodes[0])}else{var n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttribute("id","texto2_tooltip"+this.nombreGrafico),n.setAttribute("class","escala9"),o.appendChild(n)}if(document.getElementById("texto3_tooltip"+this.nombreGrafico)){var d=document.getElementById("texto3_tooltip"+this.nombreGrafico);d.removeChild(d.childNodes[0])}else{var d=document.createElementNS("http://www.w3.org/2000/svg","text");d.setAttribute("id","texto3_tooltip"+this.nombreGrafico),d.setAttribute("class","escala9 "),o.appendChild(d)}if(document.getElementById("texto4_tooltip"+this.nombreGrafico)){var c=document.getElementById("texto4_tooltip"+this.nombreGrafico);c.removeChild(c.childNodes[0])}else{var c=document.createElementNS("http://www.w3.org/2000/svg","text");c.setAttribute("id","texto4_tooltip"+this.nombreGrafico),c.setAttribute("class","escala9 "),o.appendChild(c)}if(document.getElementById("texto0_tooltip"+this.nombreGrafico)){var h=document.getElementById("texto0_tooltip"+this.nombreGrafico);h.removeChild(h.childNodes[0])}else{var h=document.createElementNS("http://www.w3.org/2000/svg","text");h.setAttribute("id","texto0_tooltip"+this.nombreGrafico),h.setAttribute("class","escala9 "),o.appendChild(h)}width=$("#"+this.contenedor_svg).width(),parseFloat(xoriginal)+200>this.anchoTotal&&(e=parseFloat(e)-210),parseFloat(a)+50>this.altoTotal&&(a=parseFloat(a)-50+parseFloat(parseFloat(this.altoTotal)-parseFloat(a))),r.setAttribute("x",e+5),r.setAttribute("y",a),r.setAttribute("width",220),r.setAttribute("height",50),h.setAttribute("x",e+10+5),h.setAttribute("y",a+10),s.setAttribute("x",e+5+5),s.setAttribute("y",a+25),n.setAttribute("x",e+5+5),n.setAttribute("y",a+40),d.setAttribute("x",e+95+5),d.setAttribute("y",a+25),c.setAttribute("x",e+95+5),c.setAttribute("y",a+40);var l=this.formateaFecha2(this.datos[elemento][indice][0]);fechaIni=ordenaFecha(l);var l=this.formateaFecha2(this.datos[elemento][indice][1]);for(fechaFin=ordenaFecha(l),i=0;i<this.resources.length;i++)if(this.resources[i][0]==elemento){nombre_texto=this.resources[i][1][0].substring(0,37),largo_nombre_texto=nombre_texto.replace(/[^A-Z]/g,"").length,num_char=37-largo_nombre_texto/4;var m=document.createTextNode(this.resources[i][1][0].substring(0,num_char))}var u=document.createTextNode("Fecha Inicio :"),p=document.createTextNode("Fecha Termino :"),b=document.createTextNode(fechaIni),g=document.createTextNode(fechaFin);h.appendChild(m),s.appendChild(u),n.appendChild(p),d.appendChild(b),c.appendChild(g),o.style.visibility="visible"},this.ocultaTooltip=function(){document.getElementById("tooltip"+this.nombreGrafico)&&(document.getElementById("tooltip"+this.nombreGrafico).style.visibility="hidden")},this.restauraCuadro=function(t){color_temp=String(t.attr("style")),color_temp2=color_temp.split(";"),color_temp=color_temp2[0].split(":"),color_antiguo=color_temp[1],rect2=document.getElementById(t.attr("id")),rect2.setAttribute("style","fill:"+color_antiguo)},this.showModal=function(e,i,a){var o=t.contruirVariable(e);t.agregarHtmlModal(o),$(document).ready(function(){$("#dialog").dialog({width:"300px",heigth:"600px",dialogClass:"ui-dialog-osx",resizable:!1,modal:!0})})},this.contruirVariable=function(t){var e=new Array,i=$(t).attr("id");i=i.split("_");var a=i[1],o=i[2],r=($(t).attr("id"),"#texto_"+String(a)+"disponibilidadGlobal");return e.nombreObjetivo=$(r).html(),e.fechaInicio=this.datos[a][o][0],e.fechaTermino=this.datos[a][o][1],e.titulo=this.datos[a][o][3],e.nombreUsuario=this.datos[a][o][4],e.id=this.datos[a][o][5],e.fechaInicioReal=this.datos[a][o][6],e},this.agregarHtmlModal=function(e){$("#dialog").empty(),fechaInicio=t.formatoFecha(e.fechaInicioReal.replace(/[.]/g,"-")),fechaTermino=t.formatoFecha(e.fechaTermino.replace(/[.]/g,"-")),nombre="<p>Nombre Objetivo: "+e.nombreObjetivo+" </p>",titulo="<p>Titulo: "+e.titulo+"</p>",termino="<p>Fecha termino: "+fechaTermino.fecha+" "+fechaTermino.hora+"</p>",inicio="<p>Fecha inicio: "+fechaInicio.fecha+" "+fechaInicio.hora+"</p>",usuario="<p>Usuario: "+e.nombreUsuario+" </p>",button="<button class=butonLeft onclick=verDetalle("+e.id+")>Ver detalle</button>",$("#dialog").append(inicio,termino,titulo,usuario,button)},this.formatoFecha=function(t){return pos=10,fin=t.length,fechaArr=Array(),fechaArr.fecha=t.substring(0,pos),fechaArr.hora=t.substring(pos+1,fin).replace(/[-]/g,":"),fechaArr}}this.createAccordion=function(t){accordionEvent=$('[id="accordionEvento"]'),2==accordionEvent.length&&accordionEvent[1].remove();try{id=t,$("#"+id).accordion({autoHeight:!0}),$("#"+id).accordion({collapsible:!0}),$("#"+id).accordion({active:!1}),createTableMain(id)}catch(e){console.log(e)}},this.createTableMain=function(t){var e="",i={};elem=$("#"+t),data=elem.data("mantain"),$("#tbody_"+t).empty(),$("#"+t).each(function(){i.hasOwnProperty(this.id)?$(this).remove():i[this.id]="true"}),$.each(data,function(t,i){objIds="",objIds=i.objetivo_id,e+='<tr><td style="border: solid 1px #ffffff;" class="celdanegra10" align="left">'+i.nombre+'</td><td style="border: solid 1px #ffffff;" class="celdanegra10" align="left"><a href="#" class="link-objetivos" title="Click Para Ver Objetivos." onclick="return getObjetivos(\''+objIds+"');\">"+i.titulo+'</a></td><td style="border: solid 1px #ffffff;" class="celdanegra10" align="left">'+i.fecha_inicio+'</td><td style="border: solid 1px #ffffff;" class="celdanegra10" align="left">'+i.fecha_termino+'</td><td style="border: solid 1px #ffffff;" class="celdanegra10" align="left"><button type="button" class="butonLeft" onclick="verDetalle('+i.id+')">Detalle</button></td></tr>'}),$("#tbody_"+t).append(e)},verDetalle=function(t){elem=$("#seccion_mantenencion"),seccion=elem.data("seccion"),historial=elem.data("historial"),mostrarSubmenu(seccion,historial,1,parseInt(t))},buildTableObj=function(t){var e=0;$("#tbodyObjMan").empty(),objetives=JSON.parse(t),$("<table>").attr({id:"tableobjetivos",width:"100%",style:"background-color='#d0d0d0'"}).appendTo("#tbodyObjMan"),$("<tr>").attr({id:"trTitleObjetivos"}).appendTo("#tableobjetivos"),$("<th>").text("Objetivo id").appendTo("#trTitleObjetivos"),$("<th>").text("Nombre").attr({width:"50%"}).appendTo("#trTitleObjetivos"),$("<th>").text("Pasos").attr({width:"20%"}).appendTo("#trTitleObjetivos"),$.each(objetives,function(t,i){$("<table>").attr({id:"objetivo_"+i.objetivo_id,width:"100%"}).appendTo("#tbodyObjMan"),$("<tr>").attr({id:"trOjetivo_"+i.objetivo_id}).appendTo("#objetivo_"+i.objetivo_id),$("<td>").text(i.objetivo_id).appendTo("#trOjetivo_"+i.objetivo_id),$("<td>").text(i.nombre).attr({width:"50%"}).appendTo("#trOjetivo_"+i.objetivo_id),$("<td>").attr({id:"html_"+i.objetivo_id,width:"20%"}).appendTo("#trOjetivo_"+i.objetivo_id),$("<i>").attr({id:"i_"+i.objetivo_id,"class":"spriteButton spriteButton-abrir_calendario",onclick:"mostrarPasos("+i.objetivo_id+")"}).appendTo("#html_"+i.objetivo_id),$("<div>").attr({id:"divPasos_"+i.objetivo_id,width:"100%"}).appendTo("#tbodyObjMan").hide(),$("<table>").attr({id:"tablePasos_"+e+"_"+i.objetivo_id,width:"99%",align:"center"}).appendTo("#divPasos_"+i.objetivo_id),$("<table>").attr({id:"tableTitlePasos_"+e+"_"+i.objetivo_id,width:"100%"}).appendTo("#tablePasos_"+e+"_"+i.objetivo_id),$("<tr>").attr({id:"trTitlePasos_"+e+"_"+i.objetivo_id}).appendTo("#tableTitlePasos_"+e+"_"+i.objetivo_id),$("<th>").text("Paso Orden").appendTo("#trTitlePasos_"+e+"_"+i.objetivo_id),$("<th>").text("Nombre").attr({width:"50%"}).appendTo("#trTitlePasos_"+e+"_"+i.objetivo_id),$("<th>").html("Patrones").attr({width:"20%"}).appendTo("#trTitlePasos_"+e+"_"+i.objetivo_id),$.each(i.pasos,function(t,a){$("<table>").attr({id:"tablePaso_"+a.paso_id+"_"+i.objetivo_id,width:"100%"}).appendTo("#tablePasos_"+e+"_"+i.objetivo_id),$("<tr>").attr({id:"trPaso_"+a.paso_id+"_"+i.objetivo_id}).appendTo("#tablePaso_"+a.paso_id+"_"+i.objetivo_id),$("<td>").text(a.paso_id).appendTo("#trPaso_"+a.paso_id+"_"+i.objetivo_id),$("<td>").text(a.nombre).attr({width:"50%"}).appendTo("#trPaso_"+a.paso_id+"_"+i.objetivo_id),$("<td>").attr({id:"html_"+i.objetivo_id+"_"+a.paso_id,width:"20%"}).appendTo("#trPaso_"+a.paso_id+"_"+i.objetivo_id),"undefined"!=typeof a.patrones&&($("<i>").attr({id:"i_"+i.objetivo_id+"_"+a.paso_id,"class":"spriteButton spriteButton-abrir_calendario",onclick:"mostrarPatrones("+i.objetivo_id+","+a.paso_id+")"}).appendTo("#html_"+i.objetivo_id+"_"+a.paso_id),$("<div>").attr({id:"divPatrones_"+i.objetivo_id+"_"+a.paso_id,width:"100%"}).appendTo("#tablePasos_"+e+"_"+i.objetivo_id).hide(),$("<table>").attr({id:"tablePatrones_"+i.objetivo_id+"_"+a.paso_id,align:"center",width:"95%"}).appendTo("#divPatrones_"+i.objetivo_id+"_"+a.paso_id),$("<tr>").attr({id:"trTitlePatrones_"+i.objetivo_id+"_"+a.paso_id}).appendTo("#tablePatrones_"+i.objetivo_id+"_"+a.paso_id),$("<th>").text("Patron Orden").appendTo("#trTitlePatrones_"+i.objetivo_id+"_"+a.paso_id),$("<th>").text("Nombre").attr({width:"40%"}).appendTo("#trTitlePatrones_"+i.objetivo_id+"_"+a.paso_id),$("<th>").html("Valor").attr({width:"30%"}).appendTo("#trTitlePatrones_"+i.objetivo_id+"_"+a.paso_id),$.each(a.patrones,function(t,e){$("<tr>").attr({id:"trPatron_"+i.objetivo_id+"_"+a.paso_id+"_"+e.patron_orden}).appendTo("#tablePatrones_"+i.objetivo_id+"_"+a.paso_id),$("<td>").text(e.patron_orden).appendTo("#trPatron_"+i.objetivo_id+"_"+a.paso_id+"_"+e.patron_orden),$("<td>").text(e.nombre).attr({width:"40%"}).appendTo("#trPatron_"+i.objetivo_id+"_"+a.paso_id+"_"+e.patron_orden),$("<td>").text(e.valor).attr({width:"30%"}).appendTo("#trPatron_"+i.objetivo_id+"_"+a.paso_id+"_"+e.patron_orden)}))}),e++}),$("#dialog-obj").dialog({width:"500px",heigth:"auto",dialogClass:"ui-dialog-osx",resizable:!0,modal:!0})},mostrarPasos=function(t){"none"==document.getElementById("divPasos_"+t).style.display?(document.getElementById("divPasos_"+t).style.display="inline",document.getElementById("i_"+t).className="spriteButton spriteButton-cerrar_calendario"):(document.getElementById("divPasos_"+t).style.display="none",document.getElementById("i_"+t).className="spriteButton spriteButton-abrir_calendario")},mostrarPatrones=function(t,e){"none"==document.getElementById("divPatrones_"+t+"_"+e).style.display?(document.getElementById("divPatrones_"+t+"_"+e).style.display="inline",document.getElementById("i_"+t+"_"+e).className="spriteButton spriteButton-cerrar_calendario"):(document.getElementById("divPatrones_"+t+"_"+e).style.display="none",document.getElementById("i_"+t+"_"+e).className="spriteButton spriteButton-abrir_calendario")},getObjetivos=function(t){$.ajax({async:!1,url:"../call_ajax.php",data:{ids:t,nameFunction:"getObjetiveName"},type:"POST",success:function(t){buildTableObj(t)},error:function(t){}})},this.ordenaFecha=function(t){return parseInt(t.getUTCDate())<10?dia="0"+t.getUTCDate():dia=t.getUTCDate(),parseInt(t.getUTCMonth())+1<10?mes="0"+(t.getUTCMonth()+1):mes=t.getUTCMonth()+1,parseInt(t.getUTCHours())<10?hora="0"+t.getUTCHours():hora=t.getUTCHours(),parseInt(t.getUTCMinutes())<10?min="0"+t.getUTCMinutes():min=t.getUTCMinutes(),parseInt(t.getUTCSeconds())<10?sec="0"+t.getUTCSeconds():sec=t.getUTCSeconds(),dia+"-"+mes+"-"+t.getUTCFullYear()+" "+hora+":"+min+":"+sec};